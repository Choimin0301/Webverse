<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Webverse: Card Game</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- ë± ë¹Œë” í™”ë©´ -->
<div id="deck-builder-screen">
    <div class="builder-header">
        <h2>Deck Builder</h2>
        <div class="deck-counter-badge" id="deck-count-display">0 / 40</div>
    </div>
    <div class="builder-body">
        <div class="card-pool" id="builder-pool"></div>
        <div class="my-deck-panel">
            <!-- ì „ì  í‘œì‹œ -->
            <div class="stats-display" id="stats-display"></div>

            <!-- ë± ê´€ë¦¬ -->
            <div class="deck-manager">
                <input type="text" id="deck-name-input" placeholder="ë± ì´ë¦„ ì…ë ¥...">
                <button class="deck-manager-btn save" onclick="handleSaveDeck()">ì €ì¥</button>
                <button class="deck-manager-btn load" onclick="toggleSavedDecksList()">ë¶ˆëŸ¬ì˜¤ê¸°</button>
            </div>
            <div class="saved-decks-list" id="saved-decks-list" style="display:none;"></div>

            <!-- ë± ë¦¬ìŠ¤íŠ¸ -->
            <div class="deck-list-scroll" id="builder-list"></div>
        </div>
    </div>
    <div class="builder-footer">
        <button class="start-btn" id="btn-finish-deck" disabled onclick="toStartScreen()">ì™„ë£Œ</button>
    </div>
</div>

<!-- ê²Œì„ ì‹œì‘ ì„ íƒ í™”ë©´ -->
<div id="start-overlay">
    <h1 style="color:var(--accent-gold); font-size: 40px; margin-bottom: 40px;">Game Start</h1>
    <div style="display:flex; gap:30px;">
        <button class="choice-btn" style="background:linear-gradient(135deg, #2980b9, #2c3e50);" onclick="startGame(true)">
            ì„ ê³µ (First)
            <span style="font-size:14px; opacity:0.8;">EP 2 / ì§„í™” 5í„´~</span>
        </button>
        <button class="choice-btn" style="background:linear-gradient(135deg, #c0392b, #2c3e50);" onclick="startGame(false)">
            í›„ê³µ (Second)
            <span style="font-size:14px; opacity:0.8;">EP 3 / ì§„í™” 4í„´~</span>
        </button>
    </div>
</div>

<!-- ê²Œì„ ì¢…ë£Œ ëª¨ë‹¬ -->
<div class="modal-overlay" id="game-end-modal">
    <div class="modal-box">
        <div class="modal-title" id="modal-result-title">ê²°ê³¼</div>
        <div class="modal-stats" id="modal-stats-content"></div>
        <div class="modal-buttons">
            <button class="modal-btn primary" onclick="restartGame()">ë‹¤ì‹œ í”Œë ˆì´</button>
            <button class="modal-btn secondary" onclick="location.href='index.html'">ë± ë¹Œë”ë¡œ</button>
        </div>
    </div>
</div>

<!-- ê²Œì„ ë³´ë“œ -->
<div id="game-board" style="display:flex;">
    <div class="sidebar-left">
        <div style="color:#888; font-weight:bold; margin-bottom:10px;">Battle Log</div>
        <div id="game-log"></div>
    </div>

    <div class="main-play-area">
        <div class="hand-row" id="enemy-hand"></div>

        <div class="battle-zone-container">
            <div class="hero-spot enemy">
                <div id="enemy-hero" class="hero-avatar enemy">Enemy</div>
                <div class="hp-pill" id="e-hp">20</div>
                <div class="ep-dots" id="e-ep"></div>
            </div>

            <div class="field-row" id="enemy-field"></div>
            <div class="battle-divider"></div>
            <div class="field-row" id="player-field"></div>

            <div class="hero-spot player">
                <div id="player-hero" class="hero-avatar player">You</div>
                <div class="hp-pill" id="p-hp">20</div>
                <div class="ep-dots" id="p-ep"></div>
            </div>
        </div>

        <div class="hand-row" id="player-hand"></div>
    </div>

    <div class="sidebar-right">
        <div class="mana-gem">ğŸ’ <span id="mana">0/0</span></div>
        <button id="btn-evolve" class="action-btn" onclick="toggleEvolve()">âš¡ ì§„í™”</button>
        <button id="btn-end" class="action-btn" onclick="endTurn()">í„´ ì¢…ë£Œ</button>
    </div>
</div>

<!-- JavaScript íŒŒì¼ ë¡œë“œ (ìˆœì„œ ì¤‘ìš”) -->
<script src="js/cards.js"></script>
<script src="js/storage.js"></script>
<script src="js/animations.js"></script>
<script src="js/game.js"></script>
<script src="js/ai.js"></script>
<script src="js/ui.js"></script>
<script src="js/deck-builder.js"></script>
<script>
    // ì•± ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
        initFieldDragEvents();

        // ë§ˆì§€ë§‰ ë± ë¶ˆëŸ¬ì˜¤ê¸° ì‹œë„, ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ë±
        if (!loadLastDeck()) {
            initBuilder();
        } else {
            renderBuilder();
        }

        // ì „ì  í‘œì‹œ ì—…ë°ì´íŠ¸
        updateStatsDisplay();
    });
</script>
</body>
</html>
