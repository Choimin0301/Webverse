/* --- 1. 글로벌 테마 --- */
:root {
    --bg-dark: #0b0c10;
    --panel-bg: #1f2833;
    --accent-gold: #f1c40f;
    --accent-green: #2ecc71;
    --text-main: #c5c6c7;
    --card-width: 110px;
    --card-height: 150px;
}

body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background-color: var(--bg-dark);
    color: var(--text-main);
    margin: 0; height: 100vh;
    display: flex; flex-direction: column;
    overflow: hidden; user-select: none;
}

/* --- 2. 덱 빌더 UI --- */
#deck-builder-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #151515; z-index: 10000;
    display: flex; flex-direction: column;
}

.builder-header {
    height: 60px; background: #222;
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 40px; border-bottom: 2px solid var(--accent-gold);
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}
.builder-header h2 { margin: 0; color: var(--accent-gold); font-size: 24px; letter-spacing: 1px; }
.deck-counter-badge {
    background: #333; padding: 6px 20px; border-radius: 20px;
    font-weight: bold; font-size: 18px; color: white; border: 1px solid #555;
}

.builder-body { flex: 1; display: flex; overflow: hidden; position: relative; }

/* 좌측: 카드 풀 (그리드) - 카드 200% 크기 */
.card-pool {
    flex: 1; padding: 40px; overflow-y: auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 30px; align-content: start;
    background: #1a1a1a;
}

/* 카드 풀 내 카드 200% 확대 */
.card-pool .card {
    width: 220px;
    height: 300px;
}
.card-pool .card .card-cost {
    width: 36px; height: 36px;
    font-size: 20px;
}
.card-pool .card .card-name {
    font-size: 14px;
}
.card-pool .card .card-mid {
    height: 28px;
}
.card-pool .card .card-desc {
    font-size: 12px;
}
.card-pool .card .stat-box {
    width: 44px; height: 38px;
    font-size: 20px;
}
.card-pool .card .keyword-icon {
    width: 22px; height: 22px;
    font-size: 14px;
}
.card-pool .card .icon-row {
    width: 80px;
}
.card-pool .card .pool-count-badge {
    font-size: 14px;
    padding: 3px 14px;
}

/* 우측: 덱 리스트 (사이드바) */
.my-deck-panel {
    width: 340px; background: #10151b;
    border-left: 1px solid #333;
    display: flex; flex-direction: column;
    box-shadow: -5px 0 15px rgba(0,0,0,0.5);
}
.deck-list-scroll {
    flex: 1; padding: 15px; overflow-y: auto;
    display: flex; flex-direction: column; gap: 8px;
}

/* 덱 리스트 아이템 */
.deck-item {
    display: flex; align-items: center; justify-content: space-between;
    background: linear-gradient(90deg, #1c2e3f, #2b455f);
    border: 1px solid #3d5a75;
    border-radius: 6px;
    padding: 8px 12px; cursor: pointer;
    transition: all 0.1s; position: relative;
}
.deck-item:hover { filter: brightness(1.2); border-color: #64b5f6; transform: translateX(-5px); }

.deck-item-left { display: flex; align-items: center; gap: 12px; }
.list-cost {
    width: 24px; height: 24px; background: #2980b9;
    color: white; border-radius: 50%; border: 2px solid #8ecafc;
    display: flex; justify-content: center; align-items: center;
    font-weight: bold; font-size: 13px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.5);
}
.list-name { font-size: 14px; font-weight: bold; color: #ecf0f1; text-shadow: 1px 1px 2px black; }
.list-count { color: var(--accent-gold); font-weight: bold; font-size: 14px; }

.builder-footer {
    height: 80px; background: #1a1a1a;
    display: flex; align-items: center; justify-content: center;
    border-top: 1px solid #333;
}
.start-btn {
    padding: 14px 60px; font-size: 20px; font-weight: bold;
    background: #27ae60; color: white; border: none; border-radius: 30px;
    cursor: pointer; box-shadow: 0 4px 0 #1e8449; transition: transform 0.1s;
}
.start-btn:active { transform: translateY(4px); box-shadow: none; }
.start-btn:disabled { background: #555; box-shadow: none; cursor: not-allowed; opacity: 0.5; }

/* --- 3. 카드 디자인 --- */
.card {
    width: var(--card-width); height: var(--card-height);
    background: #2c3e50;
    color: #333;
    border-radius: 8px; position: relative;
    display: flex; flex-direction: column; cursor: pointer;
    box-shadow: 0 5px 10px rgba(0,0,0,0.5);
    border: 2px solid #777;
    transition: transform 0.1s; flex-shrink: 0;
    overflow: hidden;
}
.card:hover { transform: scale(1.1); z-index: 500; border-color: #fff; }
.card.in-hand:hover { transform: translateY(-60px) scale(1.4); z-index: 1000; }

/* 카드 내부 레이아웃 */
.card-art {
    flex: 1.4; background: #555; background-size: cover; background-position: center;
    border-bottom: 2px solid #d4af37;
}
.card-mid {
    background: #fff; padding: 2px 0; text-align: center;
    border-bottom: 1px solid #ccc; height: 20px;
    display: flex; align-items: center; justify-content: center;
}
.card-name { font-size: 11px; font-weight: 800; color: #000; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 0 4px; }
.card-bottom {
    flex: 1; background: #eee; padding: 4px;
    position: relative; display: flex; align-items: center; justify-content: center;
}
.card-desc { font-size: 9px; line-height: 1.2; text-align: center; color: #333; height: 100%; overflow: hidden; }

/* 코스트 */
.card-cost {
    position: absolute; top: 4px; left: 4px; width: 24px; height: 24px;
    background: radial-gradient(circle, #3498db, #2980b9); color: white;
    border-radius: 50%; display: flex; justify-content: center; align-items: center;
    font-weight: 900; font-size: 14px; border: 2px solid white; z-index: 10;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.5);
}
.enhance-active .card-cost { background: radial-gradient(circle, #2ecc71, #27ae60) !important; transform: scale(1.1); }

/* 스탯 박스 */
.stat-box {
    position: absolute; bottom: 0; width: 30px; height: 26px;
    display: flex; justify-content: center; align-items: center;
    font-size: 14px; font-weight: 900; color: white; z-index: 10;
    text-shadow: 1px 1px 0 #000;
}
.stat-atk { left: 0; background: linear-gradient(45deg, #e67e22, #d35400); border-top-right-radius: 8px; }
.stat-hp { right: 0; background: linear-gradient(45deg, #c0392b, #e74c3c); border-top-left-radius: 8px; }

.icon-row { position: absolute; top: 4px; right: 4px; display: flex; gap: 2px; z-index: 5; flex-wrap: wrap; justify-content: flex-end; width: 60px; pointer-events: none; }
.keyword-icon { width: 16px; height: 16px; background: rgba(0,0,0,0.8); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 10px; border: 1px solid white; box-shadow: 1px 1px 2px black;}

/* 특수 효과 테두리 */
.card.ward { border-color: #bdc3c7; box-shadow: 0 0 8px #bdc3c7; }
.card.storm { border-color: #3498db; box-shadow: 0 0 8px #3498db; }
.card.rush { border-color: #f39c12; box-shadow: 0 0 8px #f39c12; }
.card.bane { border-bottom: 5px solid #8e44ad; }
.card.ambush { opacity: 0.8; border: 2px dashed #7f8c8d; }
.card.evolved { border-color: #f1c40f; box-shadow: 0 0 15px #f1c40f !important; }
.card.evolved .card-art { filter: sepia(0.3) contrast(1.2); }
.card.playable { box-shadow: 0 0 12px #2ecc71; border-color: #2ecc71; }
.card.can-attack { cursor: crosshair; box-shadow: 0 0 12px #e74c3c; border-color: #e74c3c; }
.card.exhausted { filter: grayscale(1); cursor: default; }
.card.enemy-card-back { background: linear-gradient(135deg, #1c2833, #2c3e50); border: 2px solid #555; }

/* 덱 빌더 상태 표시 */
.pool-count-badge {
    position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%);
    background: #27ae60; color: white; border: 2px solid #1e8449;
    padding: 1px 10px; border-radius: 12px; font-size: 11px; font-weight: 900;
    z-index: 100;
    box-shadow: 0 2px 5px rgba(0,0,0,0.8);
    white-space: nowrap; pointer-events: none;
}

.card.maxed-out {
    cursor: not-allowed !important;
    border-color: #444;
}

.card.maxed-out::after {
    content: "";
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.85);
    z-index: 20;
    border-radius: 6px;
}

.max-overlay-text {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    color: #fff; font-weight: bold; font-size: 11px; text-align: center;
    width: 95%; z-index: 50;
    text-shadow: 0 0 5px #000; line-height: 1.4;
    pointer-events: none; white-space: pre-wrap;
}

/* --- 게임 보드 UI --- */
#game-board { flex: 1; display: flex; padding: 0; background: #0b0c10; position: relative; }

.sidebar-left { width: 220px; background: rgba(0,0,0,0.3); border-right: 1px solid #333; display: flex; flex-direction: column; padding: 10px; box-sizing: border-box; }
#game-log { flex: 1; overflow-y: auto; font-size: 12px; color: #aaa; padding-right: 5px; }
.log-entry { margin-bottom: 5px; border-bottom: 1px solid #333; padding-bottom: 2px; }

.main-play-area { flex: 1; display: flex; flex-direction: column; justify-content: space-between; position: relative; padding: 20px 40px; }

.battle-zone-container { flex: 1; border: 1px solid rgba(255,255,255,0.15); border-radius: 20px; display: flex; flex-direction: column; margin: 10px 0; position: relative; }
.battle-divider { height: 1px; background: rgba(255,255,255,0.15); width: 100%; position: absolute; top: 50%; left: 0; }

.field-row { flex: 1; display: flex; justify-content: center; align-items: center; gap: 15px; padding: 10px; z-index: 2; min-height: 160px; }
.field-row.drag-hover { background: rgba(46, 204, 113, 0.05); box-shadow: inset 0 0 20px rgba(46, 204, 113, 0.2); }

.hand-row { height: 140px; display: flex; justify-content: center; align-items: center; gap: -20px; z-index: 10; }

.hero-spot { position: absolute; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; z-index: 5; }
.hero-spot.enemy { top: -50px; } .hero-spot.player { bottom: -50px; }

.hero-avatar { width: 90px; height: 90px; border-radius: 50%; border: 4px solid #444; background: #333; display: flex; justify-content: center; align-items: center; font-weight: bold; position: relative; box-shadow: 0 0 15px rgba(0,0,0,0.8); }
.hero-avatar.player { border-color: #3498db; } .hero-avatar.enemy { border-color: #c0392b; }
.hero-avatar.valid-target { border-color: #e74c3c; box-shadow: 0 0 30px #e74c3c; cursor: crosshair; transform: scale(1.1); }

.hp-pill { margin-top: -10px; background: #222; border: 2px solid #fff; padding: 2px 12px; border-radius: 12px; font-weight: bold; font-size: 16px; color: white; z-index: 6; }
.ep-dots { position: absolute; right: -25px; top: 20px; display: flex; flex-direction: column; gap: 6px; }
.dot { width: 14px; height: 14px; border-radius: 50%; background: #333; border: 1px solid #666; }
.dot.on { background: radial-gradient(circle, #f1c40f, #e67e22); border-color: #fff; box-shadow: 0 0 8px #f1c40f; }

.sidebar-right { width: 180px; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 20px; padding: 10px; }
.mana-gem { font-size: 24px; font-weight: bold; color: var(--accent-gold); display: flex; align-items: center; gap: 5px; text-shadow: 0 0 5px black; }

.action-btn { width: 100%; padding: 15px 0; border-radius: 25px; border: none; font-weight: 900; font-size: 16px; color: white; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.4); transition: transform 0.1s; text-shadow: 0 1px 1px rgba(0,0,0,0.5); }
.action-btn:active { transform: translateY(3px); box-shadow: none; }
.action-btn:disabled { background: #444 !important; color: #888; cursor: not-allowed; box-shadow: none; }
#btn-evolve { background: linear-gradient(to right, #f1c40f, #e67e22); color: #222; }
#btn-evolve.active { border: 3px solid white; box-shadow: 0 0 20px #f1c40f; transform: scale(1.05); }
#btn-end { background: linear-gradient(to right, #2ecc71, #27ae60); }

#start-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9000; display: none; flex-direction: column; justify-content: center; align-items: center; }
.choice-btn { width: 220px; height: 140px; margin: 15px; border-radius: 15px; font-size: 22px; font-weight: bold; cursor: pointer; border: 3px solid #555; transition: transform 0.2s; color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 10px; }
.choice-btn:hover { transform: scale(1.05); border-color: white; }

.dragging { opacity: 0.4; }

/* --- 모달 --- */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.9); z-index: 20000;
    display: none; justify-content: center; align-items: center;
}
.modal-overlay.active { display: flex; }

.modal-box {
    background: #1a1a2e; border: 2px solid var(--accent-gold);
    border-radius: 20px; padding: 40px; text-align: center;
    min-width: 400px; max-width: 500px;
    box-shadow: 0 0 50px rgba(241, 196, 15, 0.3);
}

.modal-title {
    font-size: 32px; font-weight: bold; margin-bottom: 20px;
}
.modal-title.win { color: #2ecc71; }
.modal-title.loss { color: #e74c3c; }

.modal-stats {
    background: #252540; border-radius: 10px; padding: 20px; margin: 20px 0;
}
.modal-stats p { margin: 8px 0; font-size: 16px; }
.stat-highlight { color: var(--accent-gold); font-weight: bold; font-size: 20px; }

.modal-buttons { display: flex; gap: 15px; justify-content: center; margin-top: 25px; }
.modal-btn {
    padding: 12px 30px; border-radius: 25px; border: none;
    font-weight: bold; font-size: 16px; cursor: pointer;
    transition: transform 0.1s;
}
.modal-btn:hover { transform: scale(1.05); }
.modal-btn.primary { background: var(--accent-green); color: white; }
.modal-btn.secondary { background: #555; color: white; }

/* --- 덱 관리 UI --- */
.deck-manager {
    display: flex; gap: 10px; padding: 10px 15px;
    background: #1a1a2e; border-bottom: 1px solid #333;
}
.deck-manager input {
    flex: 1; padding: 8px 12px; border-radius: 6px;
    border: 1px solid #444; background: #252540; color: white;
    font-size: 14px;
}
.deck-manager input::placeholder { color: #666; }
.deck-manager input:focus { outline: none; border-color: var(--accent-gold); }

.deck-manager-btn {
    padding: 8px 16px; border-radius: 6px; border: none;
    font-weight: bold; font-size: 13px; cursor: pointer;
    transition: all 0.1s;
}
.deck-manager-btn.save { background: #2980b9; color: white; }
.deck-manager-btn.load { background: #27ae60; color: white; }
.deck-manager-btn:hover { filter: brightness(1.2); }

/* 저장된 덱 목록 */
.saved-decks-list {
    max-height: 200px; overflow-y: auto;
    background: #151520; border-radius: 8px; margin-top: 10px;
}
.saved-deck-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 15px; border-bottom: 1px solid #333; cursor: pointer;
    transition: background 0.1s;
}
.saved-deck-item:hover { background: #252540; }
.saved-deck-item:last-child { border-bottom: none; }
.saved-deck-name { font-weight: bold; color: #ecf0f1; }
.saved-deck-date { font-size: 12px; color: #666; }
.saved-deck-delete {
    background: #c0392b; color: white; border: none;
    padding: 4px 10px; border-radius: 4px; font-size: 12px;
    cursor: pointer;
}
.saved-deck-delete:hover { background: #e74c3c; }

/* --- 전적 표시 --- */
.stats-display {
    background: #252540; border-radius: 8px; padding: 12px;
    margin-bottom: 10px; text-align: center;
}
.stats-display h4 { margin: 0 0 8px 0; color: var(--accent-gold); font-size: 14px; }
.stats-row { display: flex; justify-content: space-around; }
.stat-item { text-align: center; }
.stat-value { font-size: 20px; font-weight: bold; }
.stat-value.wins { color: #2ecc71; }
.stat-value.losses { color: #e74c3c; }
.stat-value.rate { color: var(--accent-gold); }
.stat-label { font-size: 11px; color: #888; }

/* ========================================
   애니메이션 & 드래그 피드백
   ======================================== */

/* --- 드래그 중인 카드 --- */
.card.dragging {
    opacity: 0.6;
    transform: scale(1.15) rotate(5deg);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
    z-index: 9999;
}

/* --- 드래그 고스트 (복제본) --- */
.drag-ghost {
    position: fixed;
    pointer-events: none;
    z-index: 99999;
    opacity: 0.9;
    transform: scale(1.1);
    filter: brightness(1.2);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
}

/* --- 드롭 가능 영역 --- */
.field-row.drag-hover {
    background: rgba(46, 204, 113, 0.15);
    box-shadow: inset 0 0 40px rgba(46, 204, 113, 0.4);
    border: 2px dashed #2ecc71;
    border-radius: 15px;
    transition: all 0.2s ease;
}

/* --- 공격 가능 타겟 하이라이트 --- */
.card.valid-target {
    animation: targetPulse 0.8s ease-in-out infinite;
    box-shadow: 0 0 25px #e74c3c, 0 0 50px rgba(231, 76, 60, 0.5);
    border-color: #e74c3c;
}

.hero-avatar.valid-target {
    animation: heroTargetPulse 0.8s ease-in-out infinite;
}

@keyframes targetPulse {
    0%, 100% { transform: scale(1); box-shadow: 0 0 25px #e74c3c; }
    50% { transform: scale(1.05); box-shadow: 0 0 40px #e74c3c, 0 0 60px rgba(231, 76, 60, 0.6); }
}

@keyframes heroTargetPulse {
    0%, 100% { transform: scale(1.1); box-shadow: 0 0 30px #e74c3c; }
    50% { transform: scale(1.15); box-shadow: 0 0 50px #e74c3c, 0 0 80px rgba(231, 76, 60, 0.5); }
}

/* --- 카드 소환 애니메이션 --- */
@keyframes summon {
    0% {
        opacity: 0;
        transform: scale(0.3) translateY(50px);
        filter: brightness(2);
    }
    50% {
        opacity: 1;
        transform: scale(1.2) translateY(-10px);
        filter: brightness(1.5);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
        filter: brightness(1);
    }
}

.card.summoning {
    animation: summon 0.5s ease-out forwards;
}

/* --- 공격 애니메이션 --- */
@keyframes attackEnemy {
    0% { transform: translateY(0); }
    30% { transform: translateY(-80px) scale(1.1); }
    60% { transform: translateY(-60px) scale(1.05); }
    100% { transform: translateY(0) scale(1); }
}

@keyframes attackPlayer {
    0% { transform: translateY(0); }
    30% { transform: translateY(80px) scale(1.1); }
    60% { transform: translateY(60px) scale(1.05); }
    100% { transform: translateY(0) scale(1); }
}

.card.attacking-up {
    animation: attackEnemy 0.4s ease-out;
    z-index: 1000;
}

.card.attacking-down {
    animation: attackPlayer 0.4s ease-out;
    z-index: 1000;
}

/* --- 피해 애니메이션 --- */
@keyframes damage {
    0%, 100% { filter: none; transform: translateX(0); }
    10% { filter: brightness(2) saturate(0); transform: translateX(-8px); }
    20% { transform: translateX(8px); }
    30% { filter: brightness(1.5) hue-rotate(-30deg); transform: translateX(-6px); }
    40% { transform: translateX(6px); }
    50% { transform: translateX(-4px); }
    60% { transform: translateX(4px); }
    70% { transform: translateX(-2px); }
    80% { transform: translateX(2px); }
}

.card.taking-damage {
    animation: damage 0.5s ease-out;
}

/* --- 피해 숫자 팝업 --- */
.damage-popup {
    position: absolute;
    font-size: 32px;
    font-weight: 900;
    color: #e74c3c;
    text-shadow: 2px 2px 0 #000, -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000;
    pointer-events: none;
    z-index: 10000;
    animation: damagePopup 1s ease-out forwards;
}

.damage-popup.heal {
    color: #2ecc71;
}

@keyframes damagePopup {
    0% {
        opacity: 1;
        transform: translateY(0) scale(0.5);
    }
    20% {
        transform: translateY(-20px) scale(1.3);
    }
    100% {
        opacity: 0;
        transform: translateY(-60px) scale(0.8);
    }
}

/* --- 진화 애니메이션 --- */
@keyframes evolve {
    0% {
        transform: scale(1);
        filter: brightness(1);
        box-shadow: 0 0 0 rgba(241, 196, 15, 0);
    }
    25% {
        transform: scale(1.3) rotate(-5deg);
        filter: brightness(2) saturate(1.5);
        box-shadow: 0 0 50px rgba(241, 196, 15, 0.8);
    }
    50% {
        transform: scale(1.4) rotate(5deg);
        filter: brightness(2.5) saturate(2);
        box-shadow: 0 0 80px rgba(241, 196, 15, 1), 0 0 120px rgba(230, 126, 34, 0.8);
    }
    75% {
        transform: scale(1.2) rotate(-3deg);
        filter: brightness(1.5);
    }
    100% {
        transform: scale(1) rotate(0);
        filter: brightness(1);
        box-shadow: 0 0 15px #f1c40f;
    }
}

.card.evolving {
    animation: evolve 0.8s ease-out forwards;
    z-index: 2000;
}

/* 진화 파티클 효과 */
.evolve-particles {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2001;
}

.evolve-particle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: radial-gradient(circle, #f1c40f, #e67e22);
    border-radius: 50%;
    animation: particle 0.8s ease-out forwards;
}

@keyframes particle {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) scale(0);
    }
}

/* --- 카드 파괴 애니메이션 --- */
@keyframes destroy {
    0% {
        opacity: 1;
        transform: scale(1) rotate(0);
        filter: brightness(1);
    }
    30% {
        opacity: 1;
        transform: scale(1.1) rotate(-5deg);
        filter: brightness(0.5) grayscale(0.5);
    }
    100% {
        opacity: 0;
        transform: scale(0) rotate(20deg);
        filter: brightness(0) grayscale(1);
    }
}

.card.destroying {
    animation: destroy 0.5s ease-in forwards;
}

/* --- 리더 피해 애니메이션 --- */
@keyframes heroDamage {
    0%, 100% { filter: none; }
    10% { filter: brightness(3) saturate(0); transform: scale(1.15); }
    20% { filter: brightness(0.5) hue-rotate(-30deg); }
    30% { filter: brightness(2); transform: scale(1.1); }
    50% { filter: brightness(0.8); }
}

.hero-avatar.taking-damage {
    animation: heroDamage 0.6s ease-out;
}

/* --- HP 변화 애니메이션 --- */
@keyframes hpChange {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}

.hp-pill.changing {
    animation: hpChange 0.3s ease-out;
}

.hp-pill.damage { color: #e74c3c; }
.hp-pill.heal { color: #2ecc71; }

/* --- 카드 드로우 애니메이션 --- */
@keyframes drawCard {
    0% {
        opacity: 0;
        transform: translateX(100px) scale(0.5) rotate(10deg);
    }
    100% {
        opacity: 1;
        transform: translateX(0) scale(1) rotate(0);
    }
}

.card.drawing {
    animation: drawCard 0.4s ease-out;
}

/* --- 턴 전환 오버레이 --- */
.turn-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 15000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
}

.turn-overlay.active {
    opacity: 1;
}

.turn-text {
    font-size: 48px;
    font-weight: 900;
    color: var(--accent-gold);
    text-shadow: 0 0 20px rgba(241, 196, 15, 0.8), 0 0 40px rgba(241, 196, 15, 0.5);
    animation: turnText 1s ease-out;
}

.turn-text.enemy {
    color: #e74c3c;
    text-shadow: 0 0 20px rgba(231, 76, 60, 0.8), 0 0 40px rgba(231, 76, 60, 0.5);
}

@keyframes turnText {
    0% { transform: scale(0.5); opacity: 0; }
    50% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}

/* --- 공격 가능 카드 펄스 --- */
.card.can-attack {
    animation: canAttackPulse 1.5s ease-in-out infinite;
}

@keyframes canAttackPulse {
    0%, 100% { box-shadow: 0 0 12px #e74c3c; }
    50% { box-shadow: 0 0 25px #e74c3c, 0 0 40px rgba(231, 76, 60, 0.4); }
}

/* --- 플레이 가능 카드 펄스 --- */
.card.playable {
    animation: playablePulse 1.5s ease-in-out infinite;
}

@keyframes playablePulse {
    0%, 100% { box-shadow: 0 0 12px #2ecc71; }
    50% { box-shadow: 0 0 25px #2ecc71, 0 0 40px rgba(46, 204, 113, 0.4); }
}

/* --- 공격선 표시 --- */
.attack-line {
    position: fixed;
    height: 4px;
    background: linear-gradient(90deg, #e74c3c, #c0392b);
    transform-origin: left center;
    pointer-events: none;
    z-index: 9998;
    box-shadow: 0 0 10px #e74c3c;
    border-radius: 2px;
}

.attack-line::after {
    content: '';
    position: absolute;
    right: -10px;
    top: -6px;
    width: 0;
    height: 0;
    border-left: 16px solid #e74c3c;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
}
